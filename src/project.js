window.__require=function i(t,e,n){function o(c,r){if(!e[c]){if(!t[c]){var a=c.split("/");if(a=a[a.length-1],!t[a]){var h="function"==typeof __require&&__require;if(!r&&h)return h(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+c+"'")}}var m=e[c]={exports:{}};t[c][0].call(m.exports,function(i){return o(t[c][1][i]||i)},m,m.exports,i,t,e,n)}return e[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({anim:[function(i,t,e){"use strict";cc._RF.push(t,"799a4xLBHRLq7Kj9a2fTp/y","anim");t.exports=function(i,t){var e=t.getComponent(cc.Sprite),n=t.addComponent(cc.Animation);return i.forEach(function(i){cc.loader.loadResDir(i,cc.SpriteFrame,function(t,o){e.spriteFrame=o[0];var s=cc.AnimationClip.createWithSpriteFrames(o,8);s.name=i,s.wrapMode=cc.WrapMode.Loop,n.addClip(s)})}),n},cc._RF.pop()},{}],"frame-action":[function(i,t,e){"use strict";cc._RF.push(t,"75482+WGJtICoDc6STdwLjk","frame-action");var n=function(i){this.opts=i,this.node=i.parent,this.onPlay=i.onPlay,this.onFinished=i.onFinished,this.createAction(i)};n.prototype={createAction:function(i){var t=this,e=i.play,n=i.action,o=i.view,s=i.parent,c=new cc.Node;c.name="actions",c.parent=s;var r=c.addComponent(cc.Sprite),a=c.addComponent(cc.Animation);cc.loader.loadResDir(e+"/"+n+"/"+o,cc.SpriteFrame,function(i,e){var n=e;r.spriteFrame=n[0];var o=cc.AnimationClip.createWithSpriteFrames(n,8);o.name="anim_action",o.wrapMode=cc.WrapMode.Normal,a.addClip(o),a.play("anim_action"),a.on("play",t._onPlay,t),a.on("finished",t._onFinished,t)}),this.actionsNode=c},removeAniNode:function(){this.actionsNode.removeFromParent()},_onPlay:function(){console.log("_play"),this.onPlay&&this.onPlay()},_onFinished:function(){console.log("_onFinished"),this.removeAniNode(),this.onFinished&&this.onFinished()}},t.exports=n,cc._RF.pop()},{}],game:[function(i,t,e){"use strict";cc._RF.push(t,"c230fsafcFJlJ2OmgyMYqBy","game"),cc.Class({extends:cc.Component,properties:{ground:{default:null,type:cc.Node},hero:{default:null,type:cc.Node}}}),cc._RF.pop()},{}],hero:[function(i,t,e){"use strict";cc._RF.push(t,"02842c1oZxJ3bu715Qv0lMl","hero");var n=function(){return function(i,t){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return function(i,t){var e=[],n=!0,o=!1,s=void 0;try{for(var c,r=i[Symbol.iterator]();!(n=(c=r.next()).done)&&(e.push(c.value),!t||e.length!==t);n=!0);}catch(i){o=!0,s=i}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}return e}(i,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=i("./utils/anim.js");cc.Class({extends:cc.Component,properties:{move:"",walking:!1,fisting:!1,kicking:!1,anim:null,speedX:50,speedY:10,minX:0,maxX:0,minY:0,maxY:0},onLoad:function(){this.anim=o(["hero-fist","hero-kick","hero-walk"],this.node),setTimeout(this.stand,1e3),this.maxX=cc.winSize.width;var i=this.getYSpan(),t=n(i,2);this.minY=t[0],this.maxY=t[1],cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},update:function(i){switch(this.move){case"":break;case"right":if(this.node.rotationY=0,this.node.x>=this.maxX)return;if(this.fisting||this.kicking)return;this.node.x+=this.speedX*i;break;case"left":if(this.node.rotationY=180,this.node.x<=this.minX)return;if(this.fisting||this.kicking)return;this.node.x-=this.speedX*i;break;case"up":if(this.node.y>=this.maxY)return;if(this.fisting||this.kicking)return;this.node.y+=this.speedY*i;break;case"down":if(this.node.y<=this.minY)return;if(this.fisting||this.kicking)return;this.node.y-=this.speedY*i}},getYSpan:function(){var i=this.node.parent.children.filter(function(i){return"ground"===i._name})[0],t=i.height,e=i.y;return[e-t,e]},onKeyDown:function(){switch(event.keyCode){case cc.macro.KEY.a:this.move="left",this.walk();break;case cc.macro.KEY.d:this.move="right",this.walk();break;case cc.macro.KEY.s:this.move="down",this.walk();break;case cc.macro.KEY.w:this.move="up",this.walk();break;case cc.macro.KEY.j:this.kick();break;case cc.macro.KEY.k:this.fist()}},onKeyUp:function(){switch(event.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.d:case cc.macro.KEY.s:case cc.macro.KEY.w:this.move="",this.walking=!1,this.anim.stop("hero-walk");break;case cc.macro.KEY.j:this.kicking=!1,this.anim.stop("hero-kick"),this.stand();break;case cc.macro.KEY.k:this.fisting=!1,this.anim.stop("hero-fist"),this.stand()}},walk:function(){this.walking||this.fisting||this.kicking||(this.anim.play("hero-walk"),this.walking=!0)},kick:function(){this.kicking||(this.kicking=!0,this.anim.play("hero-kick"))},fist:function(){this.fisting||(this.fisting=!0,this.anim.play("hero-fist"))},stand:function(){var i=this;this.anim.play("hero-walk"),setTimeout(function(){i.anim.stop("hero-walk")},100)}}),cc._RF.pop()},{"./utils/anim.js":"anim"}]},{},["game","hero","anim","frame-action"]);